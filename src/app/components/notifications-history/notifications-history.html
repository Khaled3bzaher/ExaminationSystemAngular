
@if(isLoading){
<div class="card flex justify-center">
  <p-progress-spinner
    strokeWidth="8"
    fill="transparent"
    animationDuration=".5s"
    [style]="{ width: '50px', height: '50px' }"
  />
</div>
}@else {
<p-table 
  #dt1
  [value]="notificationsHistory()"
  selectionMode="single"
  [(selection)]="selectedNotification"
>
  <ng-template #header>
    <tr>
      <th style="width: 25%">
        <div class="flex items-center gap-2">Title</div>
      </th>
      <th style="width: 50%">
        <div class="flex items-center gap-2">Message</div>
      </th>
      <th style="width: 20%">
        <div class="flex items-center gap-2">Submitted</div>
      </th>
       @if(!isAdmin){
      <th style="width: 5%">
        <div class="flex items-center gap-2">Read</div>
      </th>
    }
    </tr>
  </ng-template>
  <ng-template #body let-notificationHistory>
    <tr [pSelectableRow]="notificationHistory">
      <td>{{ notificationHistory.title }}</td>
      <td>{{ notificationHistory.message }}</td>
      <td>{{ notificationHistory.createdAt | date: 'short' }}</td>
      @if(!isAdmin){
      <td>
        <p-button
          icon="pi pi-eye" [rounded]="true"
          (click)="markAsRead(notificationHistory.id)"
        ></p-button>
      </td>
    }
    </tr>
  </ng-template>
  <ng-template #body let-notificationHistory>
    <tr [pSelectableRow]="notificationHistory">
      <td>{{ notificationHistory.title }}</td>
      <td>{{ notificationHistory.message }}</td>
      <td>{{ notificationHistory.createdAt | date: 'short' }}</td>
       @if(!isAdmin){
      <td>
        <p-button
          icon="pi pi-eye" [rounded]="true"
          (click)="markAsRead(notificationHistory.id)"
        ></p-button>
      </td>
    }
    </tr>
  </ng-template>
  <ng-template emptymessage>
    <tr>
      <td colspan="4">No Notifications found.</td>
    </tr>
  </ng-template>
</p-table>
<p-paginator
    (onPageChange)="onPageChange($event)"
    [first]="pageIndex * pageSize"
      [rows]="pageSize"
      [totalRecords]="totalCount()"
    [showCurrentPageReport]="true"
    [showPageLinks]="false"
    [showJumpToPageDropdown]="false"
    currentPageReportTemplate="Showing {first} to {last} of {totalRecords}" />
}